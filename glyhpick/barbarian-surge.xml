<?xml version="1.0" encoding="utf-8" ?>
<elements>
	<info>
		<name>Surge</name>
		<description>The Surge that flows through all.</description>
		<author>Glyphick</author>
		<update version="1.0.0">
			<file name="barbarian-surge.xml" url="https://raw.githubusercontent.com/Glyphick/Homebrew/refs/heads/master/glyhpick/barbarian-surge.xml" />
		</update>
	</info>
	
	<!-- Path of the Surge-->
	<element name="Path of the Surge" type="Archetype" source="Glyphick's Homebrew" id="ID_GLY_GH_ARCHETYPE_PATH_OF_THE_SURGE">
		<supports>Primal Path</supports>
		<requirements>ID_WOTC_PHB_CLASS_BARBARIAN</requirements>
		<description>
			<p>A barbarian Subclass.</p>
			<p class="indent">The surge of energy becomes palpable to your deft hands, your eyes see what others cannot. what lies before you is an untouched canvas of pure energy. How will you leave your mark?</p>
			<div element="ID_GLY_GH_ARCHETYPE_FEATURE_SURGE_STREAMING_COUNTER" />
			<div element="ID_GLY_GH_ARCHETYPE_FEATURE_SURGE_ELEMENTAL_SIPHONING" />
			<div element="ID_GLY_GH_ARCHETYPE_FEATURE_SURGE_SURGING_FURY" />
			<div element="ID_GLY_GH_ARCHETYPE_FEATURE_SURGE_KINETIC_ENGINE" />
		</description>
		<sheet display="false" />
		<rules>
			<grant type="Archetype Feature" id="ID_GLY_GH_ARCHETYPE_FEATURE_SURGE_STREAMING_COUNTER" level="3" />
			<grant type="Archetype Feature" id="ID_GLY_GH_ARCHETYPE_FEATURE_SURGE_ELEMENTAL_SIPHONING" level="6" />
			<grant type="Archetype Feature" id="ID_GLY_GH_ARCHETYPE_FEATURE_SURGE_SURGING_FURY" level="10" />
			<grant type="Archetype Feature" id="ID_GLY_GH_ARCHETYPE_FEATURE_SURGE_KINETIC_ENGINE" level="14" />
		</rules> 
	</element>

	<!-- Example of how to start the next element -->
	<element name="Streaming Counter" type="Archetype Feature" source="Glyphick's Homebrew" id="ID_GLY_GH_ARCHETYPE_FEATURE_SURGE_STREAMING_COUNTER">
    	<description>
        	<p>Starting at the 3rd level, you can funnel kinetic energy from your wounds. While raging, you can use a bonus action to drop your resistances until the start of your next turn. Your first successful melee attack on your next turn deals extra damage equal to half the damage you took while your resistances were lowered (Max: twice your barbarian level).</p>
    	</description>
    	<sheet action="Bonus Action">
        	<description>While Raging, drop your B/P/S resistances until your next turn. Your next melee hit deals +$(streamingcounter:damage)d$(dice:die-size) damage.</description>
    </sheet>
    	<rules>
        	<stat name="streamingcounter:damage" value="intelligence:modifier:half" level="3" />
			<stat name="streamingcounter:damage" value="constitution:modifier:half:up" level="3" />
			<stat name="streamingcounter:damage" value="constitution:modifier:half:up" level="10" />
			<stat name="streamingcounter:damage" value="intelligence:modifier" level="10" />
			<stat name="dice:die-size" value="4" level="3" />
			<stat name="dice:die-size" value="6" level="6" />
			<stat name="dice:die-size" value="8" level="10" />
			<stat name="dice:die-size" value="10" level="14" />
    	</rules>
	</element>
	<element name="Elemental Siphoning" type="Archetype Feature" source="Glyphick's Homebrew" id="ID_GLY_GH_ARCHETYPE_FEATURE_SURGE_ELEMENTAL_SIPHONING">
    	<description>
        	<p>Starting at the 6th level, you can convert kinetic impact into elemental power and survival.</p>
        	<p class="indent"><strong>Elemental Shift:</strong> Your Streaming Counter damage can be Cold, Fire, or Lightning damage.</p>
        	<p class="indent"><strong>Vital Conversion:</strong> When you use Streaming Counter, you gain temporary hit points equal to your barbarian level.</p>
        	<p class="indent"><strong>Hardened Flow:</strong> As a reaction when you take damage, you can regain your Rage resistances until the end of the current turn. You can use this a number of times equal to your proficiency bonus per long rest.</p>
    	</description>
    	<sheet usage="$(proficiency)/Long Rest">
        	<description>When using Streaming Counter, gain $(level:barbarian) Temp HP and your next strike can be Cold, Fire, or Lightning. 
        	Reaction: Regain resistances for the rest of the turn.</description>
    	</sheet>
		<rules>
			<stat name="dice:die-size" value="2" />
		</rules>
	</element>
	<element name="Surging Fury" type="Archetype Feature" source="Glyphick's Homebrew" id="ID_GLY_GH_ARCHETYPE_FEATURE_SURGE_SURGING_FURY">
    	<description>
        	<p>Starting at the 10th level, you can enter a Surging Stance as an action for up to 3 rounds.</p>
        	<p class="indent"><strong>Stance:</strong> You have resistance to all damage, but your speed is 0, and you cannot take actions or reactions. You store all damage taken during this time.</p>
        	<p class="indent"><strong>Release:</strong> Your next melee attack deals extra force damage equal to the stored damage. If you had Temp HP when starting, this damage is halved.</p>
        	<p class="indent"><strong>Aftermath:</strong> You gain 1 level of exhaustion and lose access to your subclass features (Streaming Counter/Siphoning) until you Short Rest.</p>
    	</description>
    	<sheet action="Action" usage="2/Long Rest">
        	<description>Enter a 3-round stance (Speed 0, No actions, All Resistances). Store all damage taken. Your next hit deals that damage as extra Force damage. Afterward: 1 Exhaustion level and no subclass features until Short Rest. You gain one level of exhaustion and lose access to your subclass features until you finish a Short Rest.</description>
    	</sheet>
	</element>
	<element name="Kinetic Engine" type="Archetype Feature" source="Glyphick's Homebrew" id="ID_GLY_GH_ARCHETYPE_FEATURE_SURGE_KINETIC_ENGINE">
    	<description>
        	<p>Starting at the 14th level, you have mastered the internal flow of motion.</p>
        	<p class="indent"><strong>Internal Dampening:</strong> When using Streaming Counter, the first time you take damage before your next turn, reduce it by 1d10 + your Constitution modifier + your barbarian level. This reduced damage still counts toward your extra damage bonus.</p>
        	<p class="indent"><strong>Unstoppable Force:</strong> While in your Surging Stance, you are immune to being Grappled, Prone, or Restrained.</p>
    	</description>
    	<sheet usage="3/Long Rest">
        	<description>When using Streaming Counter, reduce the first instance of incoming damage by 1d10+$(constitution:modifier)+$(level:barbarian). This "negated" damage still boosts your next attack. You are also immune to Prone/Grappled/Restrained during Surging Stance.</description>
    	</sheet>
	</element>
</elements>
